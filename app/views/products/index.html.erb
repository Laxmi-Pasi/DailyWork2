<div class="col-4" id="bloodhound" >
    <%= form_tag products_path, :method => 'get' ,local:true do %>
      <%= text_field_tag :query, params[:query], id:"query", class:"typeahead", placeholder: 'Search email is present or not' %>
        <span>
          <%= submit_tag "search"%>
        </span>
    <% end %>
  </div>
<!--<div id="bloodhound">
  <input class="typeahead" type="text" placeholder="States of USA">
</div>-->
<br><br><br><br>
<%=@products_name%>
<h1>product Table </h1>
<table>
  <tr>
    <td>product Name</td>
    <td>isbn</td>
    <% @products.each do |product| %>
  <tr>
    <td>
      <%=product.name %>
    </td>
    <td>
      <%=product.details %>
    </td>
  </tr>
  <% end %>
</table>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<%= render 'typeaheaad_bundle_js'%>
<script>
// console.log("index");
//   var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
//     'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
//     'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
//     'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
//     'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
//     'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
//     'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
//     'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
//     'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
//   ];
//   var states = new Bloodhound({
//     datumTokenizer: Bloodhound.tokenizers.whitespace,
//     queryTokenizer: Bloodhound.tokenizers.whitespace,
//     `states` is an array of state names defined in "The Basics"
//     local: states
//   });

//   $('#bloodhound .typeahead').typeahead({
//     hint: true,
//     highlight: true,
//     minLength: 1
//   },
//   {
//     name: 'states',
//     source: states
//   });
// var p2 = new Array();
// <% @products_name.each do |i|%>
//   p2.push("<%=i%>")
// <% end %>
//   var products = p2;
//   products = new Bloodhound({
//     datumTokenizer: Bloodhound.tokenizers.whitespace,
//     queryTokenizer: Bloodhound.tokenizers.whitespace,
//     local: products
//   });
//   $('#bloodhound .typeahead').typeahead({
//     hint: true,
//     highlight: true,
//     minLength: 1
//   },
//   {
//     name: 'products',
//     source: products
//   });

//-------------------autocomplete---------------------
 var products = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.whitespace,
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    remote: {
      url: '/products/autocomplete?query=%QUERY',
      wildcard: '%QUERY'
    }
  });
  $('#query').typeahead(null, {
    highlight: true,
    source: products
  });
</script>
